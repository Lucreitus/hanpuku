<!doctype html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="style/style.css"/>
    <script type="application/javascript">window.module = undefined; // hack to get jQuery to load properly</script>
    <script type="application/javascript" src="lib/jquery-1.11.0.min.js"></script>
    <script type="application/javascript" src="lib/d3.min.js"></script>
    <script type="application/javascript" src="lib/d3.layout.indent.js"></script>
    <script type="application/javascript" src="lib/CSInterface.js"></script>
    <script type="application/javascript" src="lib/phrogz.js"></script>
    <script type="application/javascript" src="lib/pwnCSS.js"></script>
    <script type="application/javascript" src="scripts/domToDoc.js"></script>
    <script type="application/javascript" src="scripts/docToDom.js"></script>
    <script type="application/javascript" src="scripts/iD3.js"></script>
    <script type="application/javascript" src="scripts/tabs/selection.js"></script>
    <script type="application/javascript" src="scripts/tabs/data.js"></script>
    <script type="application/javascript" src="scripts/tabs/code.js"></script>
    <script type="application/javascript" src="scripts/tabs/css.js"></script>
    <script type="application/javascript" src="scripts/gui.js"></script>
    <script type="text/css" id="userCSS"></script>
  </head>
  <body onload="main();">
    <div id="panels">
      <div id="dataPanel">
        <textarea id="dataEditor" wrap="off" onkeyup="DataFile.EDIT();"></textarea>
        <span>
          <select id="currentDataFile" onchange="DataFile.SWITCH_FILE();"></select>
          <input type="checkbox" id="embedFileCheckBox" onchange="DataFile.EMBED();"/>Embed
          &emsp;
          Interpret as:
          <select id="dataTypeSelect" onchange="DataFile.CHANGE_TYPE();">
            <option value="text/csv">CSV</option>
            <option value="text/tab-separated-values">TSV</option>
            <option value="text/json">JSON</option>
            <option value="text/js">Javascript</option>
          </select>
        </span>
      </div>
      <div id="selectionPanel">
        <table id="selectionPreview"></table>
      </div>
      <div id="bindingsPanel">
        <img src="img/bindings.png" width="100%"/>
      </div>
      <div id="influencePanel">
        <img src="img/influence0.png" width="100%" onclick="this.src='img/influence1.png';"/>
      </div>
      <div id="codePanel">
        <textarea id="jsEditor" wrap="off"></textarea>
        <span>
          <button onclick="jQuery('#codeFileInput').click();">Load Script...</button>
          <input type="checkbox" id="embedCodeCheckBox"/>Embed
          &emsp;
          <button onclick="runJS();">Run</button>
          <input id="codeFileInput" type="file" onchange="loadCodeFile();" style="visibility:hidden"/>
        </span>
      </div>
      <div id="cssPanel">
        <textarea id="cssEditor" wrap="off" onkeyup="editCSS();"></textarea>
      </div>
    </div>
    
    <div id="previews">
      <div id="domPreview">
        <div id="dom"></div>
        <div id="zoomButtons" class="halo">
          <span>100%</span>
          <button onclick="zoomOut();">-</button>
          <button onclick="zoomIn();">+</button>
          &emsp;
          <button onclick="docToDom();">Reset</button>
          <button onclick="domToDoc(); docToDom();">Apply</button>
        </div>
      </div>
      <div id="dataPreview">
        <div id="dataPreviewContainer"></div>
      </div>
    </div>
    
    <div id="tabControls">
      <button id="dataPanelButton" onclick="switchTab('dataPanel');">Data</button>
      <button id="bindingsPanelButton" onclick="switchTab('bindingsPanel');">Bindings</button>
      <button id="selectionPanelButton" onclick="switchTab('selectionPanel');">Data Selection</button>
      <button id="influencePanelButton" onclick="switchTab('influencePanel');">Influence</button>
      <button id="codePanelButton" onclick="switchTab('codePanel');">JS</button>
      <button id="cssPanelButton" onclick="switchTab('cssPanel');">CSS</button>
      <select id="sampleSelect" onchange="if (this.value !== 'header') { jQuery.getScript(this.value); }">
        <option value="header">Examples</option>
        <optgroup label="Scatterplot">
          <option value="samples/scatterplot/init.js">Create / Update Scatterplot</option>
          <option value="samples/scatterplot/selection.js">Select sepalLength > 6.9</option>
        </optgroup>
      </select>
    </div>
    <div id="debugButtons" class="halo">
      Debugging:
      <button onclick="location.reload();">Reload Extension</button>
    </div>
  </body>
</html>